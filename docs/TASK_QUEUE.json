{
  "policy": {
    "acceptance_mode": "test-gated",
    "split_rule": "complex tasks should be split; simple tasks may stay single",
    "stage_gate_rule": "a stage is accepted only when all required tests pass"
  },
  "tasks": [
    {
      "id": "INFRA-001",
      "stage": "INFRA",
      "title": "Build agent control and loop framework",
      "kind": "setup",
      "complexity": "simple",
      "status": "done",
      "command": "",
      "acceptance": [
        "python3 -m json.tool docs/AGENT_STATE.json >/dev/null",
        "python3 -m json.tool docs/TASK_QUEUE.json >/dev/null",
        "test -x scripts/agent_loop.sh",
        "test -x scripts/check_min.sh",
        "test -x scripts/check_full.sh",
        "test -x scripts/taskctl.py"
      ],
      "notes": "Self-loop and task control skeleton is installed."
    },
    {
      "id": "M1-001",
      "stage": "M1",
      "title": "Sync docs and baseline analysis for Zabha plan",
      "kind": "verify",
      "complexity": "simple",
      "status": "done",
      "command": "",
      "acceptance": [
        "bash -lc 'if rg -n \"Ziccrse\" docs/Agent执行计划.md docs/汇报计划.md docs/实习方向.md; then exit 1; else exit 0; fi'",
        "bash scripts/check_min.sh"
      ],
      "notes": "Plan docs aligned to Zabha mainline."
    },
    {
      "id": "M2-001",
      "stage": "M2",
      "title": "Implement and verify Zabha core test coverage in ACT",
      "kind": "develop",
      "complexity": "complex",
      "status": "done",
      "command": "",
      "acceptance": [
        "bash scripts/check_full.sh"
      ],
      "notes": "Core AMO .b/.h coverage in rv32/rv64; stage accepted by checks only."
    },
    {
      "id": "M3-001",
      "stage": "M3",
      "title": "Run integration validation for riscv-arch-test flow",
      "kind": "develop",
      "complexity": "complex",
      "status": "done",
      "command": "",
      "acceptance": [
        "bash scripts/check_full.sh"
      ],
      "notes": "Can be split later only if blocked by environment/toolchain constraints."
    },
    {
      "id": "M4-001",
      "stage": "M4",
      "title": "Prepare PR package and final report artifacts",
      "kind": "develop",
      "complexity": "simple",
      "status": "done",
      "command": "",
      "acceptance": [
        "test -f docs/RUN_LOG.md",
        "test -f docs/阶段验收标准.md"
      ],
      "notes": "No merge/submit without test evidence from prior stages."
    },
    {
      "id": "M2-002",
      "stage": "M2",
      "title": "Add Zabha+Zacas amocas.b/h tests for rv32/rv64",
      "kind": "develop",
      "complexity": "simple",
      "status": "done",
      "command": "",
      "acceptance": [
        "test -f riscv-arch-test/riscv-test-suite/rv32i_m/Zacas/src/amocas.b-01.S",
        "test -f riscv-arch-test/riscv-test-suite/rv32i_m/Zacas/src/amocas.h-01.S",
        "test -f riscv-arch-test/riscv-test-suite/rv64i_m/Zacas/src/amocas.b-01.S",
        "test -f riscv-arch-test/riscv-test-suite/rv64i_m/Zacas/src/amocas.h-01.S",
        "bash scripts/check_full.sh"
      ],
      "notes": "Covers amocas subword operations required by Zabha coverage when Zacas is present."
    },
    {
      "id": "M3-002",
      "stage": "M3",
      "title": "Re-run full gate and persist snapshot after amocas integration",
      "kind": "develop",
      "complexity": "simple",
      "status": "done",
      "command": "",
      "acceptance": [
        "bash scripts/check_full.sh",
        "test -f docs/CONTEXT_BRIEF.md"
      ],
      "notes": "Integration snapshot and stability check."
    },
    {
      "id": "M2-003",
      "stage": "M2",
      "title": "Add rv64 Zabha coverage cgf baseline",
      "kind": "develop",
      "complexity": "simple",
      "status": "done",
      "command": "",
      "acceptance": [
        "test -f riscv-arch-test/coverage/zabha/rv64zabha.cgf",
        "bash scripts/check_full.sh"
      ],
      "notes": "Enable rv64 side coverage entry for Zabha."
    },
    {
      "id": "M3-003",
      "stage": "M3",
      "title": "Re-run full gate after rv64 coverage addition",
      "kind": "develop",
      "complexity": "simple",
      "status": "done",
      "command": "",
      "acceptance": [
        "bash scripts/check_full.sh",
        "test -f docs/RUN_LOG.md"
      ],
      "notes": "Stability checkpoint for latest coverage update."
    },
    {
      "id": "M3-004",
      "stage": "M3",
      "title": "Run riscof-based execution validation for Zabha updates",
      "kind": "develop",
      "complexity": "complex",
      "status": "in_progress",
      "command": "",
      "acceptance": [
        "bash -lc 'command -v riscof >/dev/null'",
        "bash -lc 'command -v spike >/dev/null'",
        "bash -lc 'command -v sail_riscv_sim >/dev/null'"
      ],
      "notes": "phase4 auto-loop active (48 chunks, jobs=2 runtime): latest phase4_21 passed (40/40), checkpoint phase4_21_done, next phase4_22; phase5 remains blocked on non-Zabha toolchain."
    }
  ]
}
