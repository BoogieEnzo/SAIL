# 阶段验收标准（测试门禁）

## 全局规则

1. 阶段是否完成，由测试目标是否通过决定，不由代码量决定。
2. 任务不复杂时可以不拆分；复杂任务必须拆分到可测试单元。
3. 任何阶段结论必须附带可复现命令与结果记录（写入 `docs/RUN_LOG.md`）。
4. 每轮自循环必须先读取项目开发进度并写入本轮摘要，降低上下文衰减影响。
5. 采用相对频繁 commit，至少按“每任务一提交”执行，便于回滚和恢复。

## M1 验收（规范与结构）

- 目标：
  - 计划文档与主线一致（Zabha）
  - 无明显术语冲突（如 `Ziccrse` 残留）
- 门禁命令：
  - `bash -lc 'if rg -n "Ziccrse" docs; then exit 1; else exit 0; fi'`
  - `bash scripts/check_min.sh`

## M2 验收（测试实现）

- 目标：
  - Zabha 核心指令测试覆盖就绪（按当前仓库口径，排除 `amocas`）
  - rv32/rv64 目录结构与命名一致
- 门禁命令：
  - `bash scripts/check_full.sh`

## M3 验收（集成验证）

- 目标：
  - 阶段内所有定义的检查稳定通过
  - 阻塞项有明确记录与恢复步骤
- 门禁命令：
  - `bash scripts/check_full.sh`
  - 如有外部工具链，再补充目标命令（写入 `docs/RUN_LOG.md`）

## M4 验收（交付准备）

- 目标：
  - PR/汇报材料完整
  - 验证证据链完整（可追溯到命令）
- 门禁命令：
  - `test -f docs/RUN_LOG.md`
  - `test -f docs/TASK_QUEUE.json`
