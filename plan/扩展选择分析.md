# RISC-V 扩展选择分析

## 📊 当前状态分析

根据 sail-riscv Extension Roadmap，以下是未实现或正在review的扩展状态：

### ❌ 不适合的扩展（已有PR或太复杂）

1. **Svnapot** - PR #393 在review中（Ved Shanbhogue）
2. **Svpbmt** - PR #393 在review中（Ved Shanbhogue）
3. **H/Hypervisor** - 太复杂，多人协作，PR #612
4. **Q (Quad-precision FP)** - PR #445 在review中
5. **Zicfiss** - PR #1408 在review中
6. **Zcmp/Zcmt** - PR #730, #757 在review中

---

## ✅ 推荐的扩展选项

### 选项 1：Ziccrse（推荐指数：⭐⭐⭐⭐⭐）

**状态**：未分配开发者，无PR

**扩展名称**：Ziccrse - Cache Control Register Set Extension

**复杂度评估**：
- ✅ **中等难度**：涉及CSR（控制状态寄存器）操作
- ✅ **指令数量**：主要是CSR读写，不是新指令
- ✅ **你的优势**：你有内核开发经验，熟悉CSR操作

**工作内容**：
- 添加新的CSR寄存器定义
- 实现CSR的读写访问控制
- 更新页表遍历逻辑以支持cache控制

**参考实现**：
- `model/extensions/Ssqosid/` - 类似的CSR扩展
- `model/core/sys_regs.sail` - CSR定义模式

**RISC-V规范**：需要查找Ziccrse规范文档

**风险**：需要确认规范是否已批准

---

### 选项 2：Ziccamoa（推荐指数：⭐⭐⭐⭐）

**状态**：分配给 Prashanth Mundkur，但可能未开始

**扩展名称**：Ziccamoa - Cache Coherency Atomic Memory Operations

**复杂度评估**：
- ✅ **中等难度**：原子操作相关，你有A扩展经验
- ✅ **指令数量**：可能需要新增几条原子指令
- ✅ **你的优势**：熟悉原子操作（rCore中有相关经验）

**工作内容**：
- 实现新的原子内存操作指令
- 处理cache一致性相关的语义

**参考实现**：
- `model/extensions/A/` - 原子操作扩展
- `model/extensions/Zaamo/` - 原子内存操作

**RISC-V规范**：需要查找Ziccamoa规范文档

**风险**：需要确认Prashanth是否已开始，避免冲突

---

### 选项 3：Zicclsm（推荐指数：⭐⭐⭐）

**状态**：PR #1468 在review中（tongjiacheng）

**扩展名称**：Zicclsm - Cache Coherency Load Store Multiple

**复杂度评估**：
- ⚠️ **已有PR**：PR在review中，不建议选择
- ✅ **中等难度**：load/store相关，你有内存管理经验

**建议**：**不推荐**，因为有PR在review

---

### 选项 4：修复或完善现有扩展（推荐指数：⭐⭐⭐⭐）

**思路**：不实现新扩展，而是修复或完善现有扩展的bug

**优势**：
- ✅ 风险低，不会与其他人冲突
- ✅ 可以解决实际问题
- ✅ 代码质量要求高，符合考核标准

**可能的任务**：
1. 查看GitHub Issues，找标记为"good first issue"的bug
2. 修复TODO/FIXME中的问题（但需要确保不是太简单）
3. 完善某个扩展的边界情况处理

**参考**：
- sail-riscv GitHub Issues
- 代码中的TODO/FIXME注释

---

## 🎯 最终推荐

### 第一推荐：Ziccrse（如果规范已批准）

**理由**：
1. ✅ 无开发者分配，无PR冲突
2. ✅ 复杂度适中（CSR操作，你有经验）
3. ✅ 有参考实现（Ssqosid等）
4. ✅ 符合1-2周时间要求

**下一步行动**：
1. 查找Ziccrse的RISC-V规范文档
2. 确认规范是否已批准
3. 评估实现复杂度
4. 如果合适，开始实现

---

### 第二推荐：修复现有扩展的bug

**理由**：
1. ✅ 零冲突风险
2. ✅ 解决实际问题
3. ✅ 可以展示代码质量

**下一步行动**：
1. 浏览sail-riscv GitHub Issues
2. 找标记为"help wanted"或"good first issue"的
3. 选择一个中等难度的bug修复

---

### 第三推荐：Ziccamoa（如果确认无冲突）

**理由**：
1. ✅ 你有原子操作经验
2. ⚠️ 需要确认Prashanth是否已开始

**下一步行动**：
1. 检查GitHub是否有相关PR或Issue
2. 如果无冲突，可以考虑

---

## 📋 选择标准总结

### ✅ 好的选择特征：
- 无开发者分配或确认未开始
- 无PR在review中
- 复杂度适中（2-10条指令或CSR操作）
- 有明确的RISC-V规范文档
- 有参考实现可以学习

### ❌ 避免的选择：
- 已有PR在review
- 太简单（如只有一条hint指令）
- 太复杂（如Vector扩展）
- 未批准的实验性扩展（需要特殊标志）

---

## 🔍 下一步行动

1. **立即检查**：
   - [ ] 访问 https://github.com/riscv/sail-riscv/issues
   - [ ] 搜索 "Ziccrse" 或 "Ziccamoa"
   - [ ] 检查是否有相关PR

2. **查找规范**：
   - [ ] 访问 https://riscv.org/technical/specifications/
   - [ ] 查找Ziccrse或Ziccamoa规范文档
   - [ ] 评估规范复杂度

3. **确认选择**：
   - [ ] 与导师或社区确认扩展状态
   - [ ] 确认无冲突后开始实现

---

**最后更新**：2026-02-18  
**状态**：待确认具体扩展
